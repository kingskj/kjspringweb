# 작업 프로토콜 (GPT + Claude 핑퐁) — kjspringweb

## 0. 목적
- 스파게티 재발 방지
- 변경 통제(제안/검토/확정/적용 분리)
- 다음 대화방에서도 맥락 유지

---

## 1. 기본 원칙
- 검토 파트너는 `GPT + Claude`만 사용한다.
- 확정 전에는 코드/파일을 수정하지 않는다.
- 모든 판단은 `코드/로그/실행결과` 근거로만 한다.
- 한 턴에 한 가지 논점만 확정한다(논점 분리).

---

## 2. 역할 분담

| 역할 | 담당 |
|------|------|
| 코드 수정/반영 | GPT (IntelliJ/VSCode) |
| 검토/딴지/대안 제시 | Claude |
| 최종 판단 + 테스트 | 오빠 |

---

## 3. 턴 시작 선언(고정 템플릿)
아래 4줄을 먼저 선언하고 시작한다.

1. `이번 턴 모드: 제안만 / 실제 수정`
2. `검토 소스: GPT + Claude`
3. `확정 트리거: "검토 완료. 확정. 수정해"`
4. `종료 조건: docs 일지 + gpt.md 인계 메모`

---

## 4. 검토 라운드 규칙
- 딴지는 반드시 아래 형식으로 남긴다.
  - `쟁점`
  - `왜 문제인지`
  - `재현/증거`
  - `수정안(최소 변경)`
- 제안은 아래 3분류로 즉시 판정한다.
  - `수용`: 바로 반영 후보
  - `부분 수용`: 일부만 채택 + 이유
  - `반박`: 채택 안 함 + 이유
- 추측성 주장("아마", "느낌")은 채택하지 않는다.

---

## 5. 확정 트리거
- 아래 문구 전에는 **절대 수정 금지**:
  - `검토 완료. 확정. 수정해`
- 확정 후에도 원칙:
  - 범위 최소화(필요 파일만)
  - 기존 동작 훼손 금지
  - 무관 리팩터링 금지

---

## 6. 적용 턴 규칙
- 변경은 한 번에 크게 하지 말고, 논점 단위로 쪼갠다.
- 수정 후 최소 검증:
  - 빌드/기동 에러 체크
  - 핵심 기능 동작 확인 (브라우저 또는 로그)
  - 실패 시 원복/수정 방향 명확화
- 테스트를 못 하면 반드시 "미실행"을 문서에 남긴다.

---

## 7. Spring 특이사항
- 변경 후 반드시 **서버 재기동** 확인
- H2 콘솔: `http://localhost:8080/h2-console` (로컬 기동 시)
- GCP 배포 검증은 별도 명시 ("GCP 배포 후 확인" 표기)
- Batch 변경 시 스케줄 시각 명시 필수

---

## 8. 종료(인계) 규칙
작업 종료 시 반드시 2개를 남긴다.

1. `docs` 작업 일지 (`hYYYYMMDDHHmm.md`)
2. `gpt.md`, `CLAUDE.md` 인계 메모

인계 메모 최소 항목:
- 오늘 변경 파일/핵심 변경점
- 테스트 실행 여부(실행/미실행 + 이유)
- 다음 대화방 첫 작업
- 보류 이슈/리스크

---

## 9. 금지 목록
- 근거 없는 하드코딩 추가
- 로그 없는 조용한 fallback(silent fail)
- 요청 없는 구조개편/대규모 리팩터링
- 한 번에 여러 논점 동시 수정
- 실서비스 보안 기준 임의 적용 (테스트 목적 프로젝트)

---

## 10. 다음 세션 시작 한 줄
`인계 메모 기준으로 테스트부터 시작해.`